<script>
    const products = [
        {name : '반팔티', price : 15000},
        {name : '긴팔티', price : 20000},
        {name : '핸드폰케이스', price : 15000},
        {name : '후드티', price : 30000},
        {name : '바지', price : 25000}
    ];
</script>

<!-- # map

<script>
    const map = (f, iter) => {
        let res = [];
        for(const a of iter){
            res.push(f(a))
        }
        return res
    }
</script> -->

# filter

<script>
    const filter = (f, iter) => {
        let res = [];
        for(const a of iter){
            if(f(a)) res.push(a)
        }
        return res
    }

    // let under20000 = [];
    // for(const p of products){
    //     if(p.price < 20000) under20000.push(p)
    // }
    // console.log(under20000);
    console.log(...filter(p => p.price < 20000, products));

    // let over20000 = [];
    // for(const p of products){
    //     if(p.price >= 20000) over20000.push(p)
    // }
    // console.log(over20000)
    console.log(...filter(p => p.price >= 20000, products));
    // console.log(filter(n => n % 2, [1,2,3,4,5]));
    // console.log(filter(node => node.nodeName.length >= 4 , document.querySelectorAll('*')));
    // console.log(filter(gen => gen % 2 === 0, function* gen(){
    //     yield 1;
    //     yield 2;
    //     yield 3;
    //     yield 4;
    // }()))
</script>

# reduce

<script>
    console.clear();

    let nums = [1,2,3,4,5];
    // let total = 0;
    // for(const n of nums){
    //     total = total + n
    // }
    // console.log(total)

    const reduce = (f, acc, iter) => {
        if(!iter) {
            iter = acc[Symbol.iterator]();
            acc = iter.next().value;
        }
        for(const a of iter){
            acc = f(acc, a);
        }
        return acc
    }

    const add = (a,b) => a + b;
    console.log(reduce(add, 0, nums)); // 15;
    console.log(add(add(add(add(add(0,1), 2), 3),4),5)); // 15;
    console.log(reduce(add, [2,2,3,4,5])); // 16
    
    // console.log(reduce(add, map(p=>p.price, products)));
</script>

<script>
    console.log(reduce((total_price, p)=> total_price + p.price, 0, products));
</script>